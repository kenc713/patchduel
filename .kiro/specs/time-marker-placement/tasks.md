# 実装計画: time-marker-placement

- [ ] 1. ボード UI を実装する (P)
- [ ] 1.1 8×8 グリッドと座標体系を描画する (P)
  - 行と列を描画し、セル識別子と空状態を提供する
  - _Requirements: 3.1_
- [ ] 1.2 セル選択と視覚的ハイライトを実装する (P)
  - ホバーや選択セルの視覚フィードバックを表示する
  - _Requirements: 3.2_
- [ ] 1.3 選択イベントを状態管理に送出し、クリックを処理する

  - x,y 座標を含む選択イベントを発火して下流で処理する
  - _Requirements: 1.1,3.2_

- [ ] 2. GameSession（状態管理）を実装する (P)
- [ ] 2.1 範囲と空セル検証を行う `placeMarker` を実装する (P)
  - 0<=x<=7 および 0<=y<=7 を検証し、範囲外の選択を拒否する
  - 配置前に対象セルが空であることを検証する
  - メモリ内の盤状態にマーカーを保持する
  - _Requirements: 1.1,1.2,3.3_
- [ ] 2.2 プレイヤーごとの単一マーカー不変条件を強制する
  - 各プレイヤーにつき最大 1 つのマーカーのみ存在することを保証する（追加配置を防ぐ、あるいは移動の方針に従う）
  - _Requirements: 1.4_
- [ ] 2.3 盤状態およびマーカーの読み取り API を提供する

  - UI で利用できる `getBoard()` と簡易クエリヘルパーを実装する
  - _Requirements: 3.1,4.2_

- [ ] 3. セッション初期化と初期マーカー配置
- [ ] 3.1 単一プレイヤーセッションを初期化し、(0,0) に初期マーカーを配置する
  - セッション状態を作成し、アクティブプレイヤーを設定し、ゲーム開始時に x=0,y=0 にマーカーを配置する
  - _Requirements: 4.1,4.2_
- [ ] 3.2 配置やターン終了後の操作を記録し、UI 状態を更新する

  - セッション状態に配置とターン終了イベントを記録して UI に反映させる
  - _Requirements: 4.3_

- [ ] 4. ターン終了の振る舞いを実装する
- [ ] 4.1 セッション状態を更新して遷移する `endTurn` を実装する
  - プレイヤーのターンを終了としてマークし、セッション状態を更新する
  - _Requirements: 2.1_
- [ ] 4.2 マーカー未配置でも `endTurn` を許容する（明示的ケース）

  - プレイヤーにマーカーがなくても `endTurn` が受け付け完了することを保証する
  - _Requirements: 2.2_

- [ ] 5. 統合、テスト、QA
- [ ] 5.1 `placeMarker` の検証と不変条件に関するユニットテスト
  - 範囲チェック、空セルチェック、単一マーカー不変のテストを作成する
  - _Requirements: 1.1,1.2,1.4,3.3_
- [ ] 5.2 統合テスト: Board UI → placeMarker → endTurn フロー
  - UI がイベントを発火し、状態が更新され、マーカー未配置でのターン終了も含めて UI が最終状態を反映することを検証する
  - _Requirements: 1.1,2.1,2.2,4.3_
- [ ] 5.3 E2E スモーク: ユーザーパス（ボード描画、マーカー配置、ターン終了）

  - ローカル環境でのフルパス検証
  - _Requirements: 1.1,2.1,3.1,4.1_

-

---

-Total: 5 major tasks, 11 sub-tasks
