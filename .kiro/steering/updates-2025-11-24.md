```markdown
# Steering Sync - 2025-11-24

## 概要

このファイルは `.kiro/steering/` の現行ドキュメント（`product.md`, `tech.md`, `structure.md`）とコードベースの差分（drift）を検出し、観察結果と推奨を付記するためのものです。追加は非破壊的で既存内容を変更しません。

## 主な観察結果

- **CI ワークフロー**: `.github/workflows/ci.yml` が存在し、`npm ci` → `npm test` を実行する簡易 CI が設定されています。`tech.md` の記述と一致しています。
- **テスト戦略**: プロジェクトは現状 `vitest` + `@testing-library/react` を利用しており、軽量の E2E スモークテスト（jsdom）を採用しています。`tech.md` の方針（Playwright 推奨）と整合しますが、Playwright は導入されていません（推奨段階）。
- **状態管理**: `Zustand` を採用しており、`src/state/useGame.ts` / `src/state/session.ts` が実装されています。`tech.md` の指針と一致します。
- **ディレクトリ構成**: `structure.md` は Feature-first を推奨する一方で、現行コードは `src/components/`, `src/state/`, `src/models/` のクラシックな分割を採用しています。これは「設計方針に沿うための移行候補」であり重大な不整合ではありませんが、将来の拡張時にリファクタリング計画を検討すると良いです。

## 小さな差分（Drift）と推奨

1. ディレクトリ構成（軽微）

   - 状況: 現行は機能単位フォルダではなく、`components` / `state` / `models` が並列に存在。
   - 推奨: 大規模化時に `src/features/{feature}/` へ段階的に移行する計画を `structure.md` に短いガイドとして追記する（例: 1-2 コンポーネントを移動してパターンを確立）。

2. E2E ツール（決定留保）

   - 状況: Playwright は未導入。軽量スモークは `vitest` + `jsdom` で実行中。
   - 推奨: Playwright を導入する必要が生じた時点で `tech.md` に Playwright 導入手順（CI でのセットアップ含む）を追記する。

3. テスト配置（情報追記）
   - 状況: 実テストは `tests/` にまとまっている。`structure.md` でも `tests/` を許容する記載があるが、若干の重複記述あり。
   - 推奨: `structure.md` のテスト節に「現状: `tests/` を使用している」との短い注記を追加し、将来 `src/**/__tests__/` に移行する基準を追記すると良い。

## リスクと監視ポイント

- `Board.tsx` は `useGame` のセレクタを複数使って購読している（`markers`, `placeMarker`, `activePlayer`, `selected`）。レンダリング効率やサブスクライブ粒度に注意すると良い（大量更新で再描画が多くなる可能性）。
- `console.log` デバッグ出力が残っている箇所があるため、リリース前にログの削除またはロガーに置換することを推奨します。

## 次のアクション候補

- `structure.md` に「段階的 feature-first 移行ガイド」を短く追加（小さな patch）。
- Playwright を導入する場合は `tech.md` に手順を追記し、CI ワークフローに Playwright のセットアップを追加する提案を作る。
- リリース前に `console.log` を整理する小パッチを準備する。

---

Generated by steering sync tool on 2025-11-24
```
